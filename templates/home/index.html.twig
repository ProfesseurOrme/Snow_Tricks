{% extends 'template.html.twig' %}

{% block title %}{{ 'Meta_Title_Home'|trans }}{% endblock %}

{% import 'macros/modal-delete.html.twig' as macro %}

{% block body %}

<section class="page-header header-filter" style="background-image: url({{ asset('pictures/background.jpg') }})">
    <div class="container">
        <div class="row">
            <div class="col-md-8 ml-auto mr-auto">
                <div class="brand">
                    <h1>Snow Tricks</h1>
                    <h3>{{ 'Home_Title_Description'|trans }}</h3>
                </div>
            </div>
        </div>
    </div>
</section>
<section id="trick" class="main homepage">
    <div class="container-fluid">
        <div class="row row-cols-md-4">
            {% for trick in tricks %}
                 <div class="col-tricks col-md-6 col-lg-3 mx-auto card-columns mx-auto d-flex justify-content-center">
                    <div class="card">
                        <img class="card-img-top" src="{{ asset('upload_directory/'~ trick.picture) }}" rel="nofollow" alt="Card image cap">
                        <div class="card-body d-flex flex-row justify-content-between">
                            <a href="{{ path('trick_detail', {'slug' : trick.slug }) }}" data-toggle="tooltip" title="{{ 'Home_Link_Trick'|trans ~ ' : '~ trick.name }}"><h4 class="card-title d-flex flex-column m-2">{{ trick.name }}</h4></a>
                            {% if is_granted('IS_AUTHENTICATED_FULLY') %}
                                {% if is_granted('ROLE_ADMIN') or app.user.username == trick.user.username %}
                                    <div class="home-tool">
                                        <a href="{{ path('trick_edit', {'slug' : trick.slug}) }}" target="_blank" data-toggle="tooltip" data-placement="top" title="{{ 'Edit_Icon'|trans }}"><span class="material-icons">create</span></a><a class="modal-delete" data-placement="top" data-toggle="modal" data-target="#deleteModal" data-path="{{ path('trick_delete', {'slug' : trick.slug}) }}" data-trickname="{{ trick.name }}"><span data-toggle="tooltip" title="{{ 'Delete_Icon'|trans }}" data-placement="top" class="material-icons">delete</span></a>
                                    </div>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                 </div>
            {% endfor %}
        </div>
        {% if nbTricks > 8 %}
            <div class="row row-more">
                <div class="col text-center">
                    <button id="load-more" class="btn btn-dark-blue" data-url="{{ path('home_load_more', {'page' : 2 }) }}" data-elements="{{ nbTricks }}" data-loaded="8">Load More</button>
                </div>
            </div>
        {% endif %}
    </div>
</section>
<div class="modals">
    {{ macro.delete_modal() }}
</div>
    {{ encore_entry_script_tags('load') }}
    {{ encore_entry_script_tags('modal') }}
{% endblock %}
